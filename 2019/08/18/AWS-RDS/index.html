<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="RDS，AWS,">










<meta name="description" content="AWS Relation Database Service Amazon Relational Database Service (Amazon RDS) 是一项 Web 服务，让用户能够在云中更轻松地设置、操作和扩展关系数据库。 它可以经济有效的为用户提供一个容量可调的行业标准的关系数据库，并承担常见的数据库管理任务。 RDS 功能及优势 CPU，内存，存储和IOPS可以独立扩展 Amazon">
<meta name="keywords" content="RDS，AWS">
<meta property="og:type" content="article">
<meta property="og:title" content="AWS RDS ">
<meta property="og:url" content="http://sevengarden.club/2019/08/18/AWS-RDS/index.html">
<meta property="og:site_name" content="岳阳北寒">
<meta property="og:description" content="AWS Relation Database Service Amazon Relational Database Service (Amazon RDS) 是一项 Web 服务，让用户能够在云中更轻松地设置、操作和扩展关系数据库。 它可以经济有效的为用户提供一个容量可调的行业标准的关系数据库，并承担常见的数据库管理任务。 RDS 功能及优势 CPU，内存，存储和IOPS可以独立扩展 Amazon">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-08-18T04:00:50.042Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AWS RDS ">
<meta name="twitter:description" content="AWS Relation Database Service Amazon Relational Database Service (Amazon RDS) 是一项 Web 服务，让用户能够在云中更轻松地设置、操作和扩展关系数据库。 它可以经济有效的为用户提供一个容量可调的行业标准的关系数据库，并承担常见的数据库管理任务。 RDS 功能及优势 CPU，内存，存储和IOPS可以独立扩展 Amazon">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://sevengarden.club/2019/08/18/AWS-RDS/">





  <title>AWS RDS  | 岳阳北寒</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">岳阳北寒</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">要有最朴素的生活和最遥远的梦想，即使明日天寒地冻，路远马亡.......</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-somrthing">
          <a href="/有料" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            somrthing
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sevengarden.club/2019/08/18/AWS-RDS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="seven">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="岳阳北寒">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">AWS RDS </h1>
        

        <div class="post-meta">
          
                    <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-18T10:39:26+08:00">
                2019-08-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AWS/" itemprop="url" rel="index">
                    <span itemprop="name">AWS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="AWS-Relation-Database-Service"><a href="#AWS-Relation-Database-Service" class="headerlink" title="AWS Relation Database Service"></a>AWS Relation Database Service</h1><ul>
<li>Amazon Relational Database Service (Amazon RDS) 是一项 Web 服务，让用户能够在云中更轻松地设置、操作和扩展关系数据库。</li>
<li>它可以经济有效的为用户提供一个容量可调的行业标准的关系数据库，并承担常见的数据库管理任务。</li>
<li>RDS 功能及优势<ul>
<li>CPU，内存，存储和IOPS可以独立扩展</li>
<li>Amazon RDS 可以管理备份、软件修补、自动故障检测和恢复</li>
<li>可以在需要时执行自动备份，也可以手动创建备份快照。可以使用这些备份还原数据库。Amazon RDS 还原过程将可靠且高效地工作</li>
<li>通过主实例和在发生问题时可向其执行故障转移操作的同步辅助实例实现高可用性。还可以使用 MySQL、MariaDB 或 PostgreSQL 只读副本扩展读取, 从而提供弹性和可伸缩性。</li>
<li>支持MySQL，MariaDB，PostgreSQL，Oracle，Microsoft SQL Server以及与MySQL兼容的全新Amazon Aurora数据库引擎</li>
<li>除了数据库包中的安全性之外，IAM用户和权限还可以帮助控制谁有权访问RDS数据库服务</li>
<li>数据库可以通过将它们放在VPC中进行进一步保护，使用SSL传输数据并对其余数据进行加密</li>
<li>由于它是托管服务，因此不提供对数据库实例的shell（root ssh）访问，这限制了对需要高级权限的某些系统过程和表的访问</li>
</ul>
</li>
</ul>
<h2 id="RDS-Components"><a href="#RDS-Components" class="headerlink" title="RDS Components"></a>RDS Components</h2><h3 id="DB-Instance"><a href="#DB-Instance" class="headerlink" title="DB Instance"></a>DB Instance</h3><ul>
<li>数据库实例的基本构建块</li>
<li>数据库实例是在云中运行的独立数据库环境</li>
<li>每个数据库实例均运行一个数据库引擎。Amazon RDS 当前支持 MySQL、MariaDB、PostgreSQL、Oracle 和 Microsoft SQL Server 数据库引擎</li>
<li>AWS Command Line Interface、Amazon RDS、API 或 AWS 管理控制台 创建和修改数据库实例</li>
<li>数据库实例的计算和内存容量由数据库实例类决定。选择最能满足需求的数据库实例。</li>
<li>数据库实例存储有三种类型：磁性、通用型 (SSD) 和配置的 IOPS (PIOPS)</li>
<li><font color="red">对于每个数据库实例，可以选择5 GB到6 TB的关联存储容量（会时常更新，目前最大容量可达64TB）</font></li>
<li>每个数据库实例都有一个数据库实例标识符，该标识符是客户提供的名称，对于AWS区域中的该客户必须是唯一的。它在与Amazon RDS API和AWS CLI命令交互时唯一标识数据库实例</li>
<li>每个数据库实例可以托管多个数据库，也可以托管具有多个模式的单个Oracle数据库。</li>
<li>建议托管在AWS VPC环境中以获得更好的控制</li>
</ul>
<h3 id="区域和可用区"><a href="#区域和可用区" class="headerlink" title="区域和可用区"></a>区域和可用区</h3><ul>
<li>Amazon 云计算资源安置在世界不同地区 (例如：北美、欧洲或亚洲) 的高度可用的数据中心设施内。每个数据中心位置称为一个地区</li>
<li>每个地区包含很多称为可用区或 AZ 的不同位置。每个可用区都被设计成不受其他可用区故障的影响，并提供低价、低延迟的网络连接，以连接到同一地区其他可用区。</li>
<li>可以在多个可用区运行数据库实例，此选项称为多可用区部署。<ul>
<li>Amazon 会自动在不同的可用区预配置和维护辅助备用数据库实例</li>
<li>主数据库实例可以跨可用区同步复制到辅助实例，从而在系统备份期间提供数据冗余、故障转移支持、消除 I/O 冻结和最大程度地降低延迟峰值</li>
</ul>
</li>
<li>安全组<ul>
<li>安全组通过允许访问指定的IP地址范围或EC2实例来控制对数据库实例的访问</li>
</ul>
</li>
<li>DB 参数组<ul>
<li>包含可应用于同一实例类型的一个或多个数据库实例的引擎配置值</li>
</ul>
</li>
<li>DB选项组<ul>
<li>一些数据库引擎提供的工具可以简化数据库管理并为数据库提供更多安全保护。</li>
<li>亚马逊RDS通过选项组提供此类工具，例如 Oracle Application Express（APEX），SQL Server透明数据加密和MySQL memcached支持</li>
</ul>
</li>
<li>RDS  接口<ul>
<li>AWS RDS 控制台</li>
<li>CLI</li>
<li>SDK、RDS API</li>
</ul>
</li>
</ul>
<h1 id="RDS-Replication-–-Multi-AZ-amp-Read-Replica"><a href="#RDS-Replication-–-Multi-AZ-amp-Read-Replica" class="headerlink" title="RDS Replication – Multi-AZ &amp; Read Replica"></a>RDS Replication – Multi-AZ &amp; Read Replica</h1><ul>
<li>数据库实例副本可通过多可用区部署或只读副本方式创建</li>
<li>多可用区部署<ul>
<li>多可用区部署提供高可用性和故障转移支持</li>
<li>RDS自动在不同的AZ（物理上独立的位置中的独立基础架构）中配置和管理同步备用副本</li>
<li>RDS会自动故障转移到备用数据库，以便数据库操作可以在没有干预的情况下快速恢复<ol>
<li>计划数据库维护</li>
<li>软件修补</li>
<li>重新启动主实例</li>
<li>主数据库实例连接或主机故障，或</li>
<li>可用区失败</li>
</ol>
</li>
</ul>
</li>
<li>只读副本<ul>
<li>Amazon RDS 还使用 MariaDB、MySQL、Oracle 和 PostgreSQL 数据库引擎的内置复制功能来从源数据库实例创建一个特殊类型的数据库实例，称为只读副本</li>
<li>对源数据库实例的更新将异步复制到只读副本。可以将应用程序发出的读取查询路由到只读副本，以减轻源数据库实例上的负载。</li>
<li>利用只读副本，可针对进行大量读取操作的数据库负载灵活地进行扩展，突破单个数据库实例的容量限制。</li>
</ul>
</li>
</ul>
<h2 id="Multi-AZ-deployment"><a href="#Multi-AZ-deployment" class="headerlink" title="Multi-AZ deployment"></a>Multi-AZ deployment</h2><ul>
<li>Amazon RDS 使用多可用区部署为数据库实例提供高可用性和故障转移支持。Amazon RDS 使用几种不同的技术来提供故障转移支持。用于 Oracle、PostgreSQL、MySQL 和 MariaDB 数据库实例的多可用区部署使用 Amazon 的故障转移技术。SQL Server 数据库实例使用 SQL Server 数据库镜像 (DBM)</li>
<li>高可用性功能不是面向只读情况的扩展解决方案；不能使用备用副本处理读取流量。要处理只读流量，应当使用只读副本</li>
<li>Multi-AZ 部署<ul>
<li>在多可用区部署中，Amazon RDS 会自动在不同可用区中配置和维护一个同步备用副本</li>
<li>主数据库实例将跨可用区同步复制到备用副本，以提供数据冗余、消除 I/O 冻结并在系统备份期间将延迟峰值降至最小</li>
<li>与单可用区部署相比，使用多可用区部署的数据库实例由于执行同步数据复制，因此会增加写入和提交延迟</li>
<li>仅当主数据库和备用数据库上的提交都成功时，才会返回事务成功</li>
<li>尽管 AWS 设计用于处理可用区之间的低延迟网络连接，但如果、部署故障转移到备用副本，延迟可能会发生更改</li>
</ul>
</li>
<li>使用BYOL许可模型时，需要主实例和备用副本的许可证</li>
<li>对于生产工作负载，建议使用具有预配置IOPS和数据库实例类（m1.large和更大）的多可用区部署，针对预配置IOPS进行了优化，以实现快速，一致的性能</li>
<li>将单可用区部署修改为多可用区部署时（对于SQL Server或Amazon Aurora以外的引擎）<ol>
<li>Amazon RDS拍摄主数据库实例的快照，然后将该快照还原到另一个可用区。</li>
<li>Amazon RDS 在主数据库实例与新实例之间设置同步复制</li>
<li>避免在从单可用区转换到多可用区时出现停机，但会在首次转换到多可用区时体验明显的性能影响。对于大型写入密集型数据库实例来说，此影响更明显</li>
</ol>
</li>
</ul>
<h2 id="RDS-Multi-AZ-Failover-Process"><a href="#RDS-Multi-AZ-Failover-Process" class="headerlink" title="RDS Multi-AZ Failover Process"></a>RDS Multi-AZ Failover Process</h2><ul>
<li>数据库实例发生计划内或计划外的中断时，对已启用多可用区，则 Amazon RDS 会自动切换到另一个可用区中的备用副本</li>
<li>完成故障转移所用的时间取决于在主数据库实例变为不可用时的数据库活动和其他条件。故障转移时间通常为 60-120 秒</li>
<li>故障转移机制自动更改数据库实例的 DNS 记录，使其指向备用数据库实例</li>
<li>多可用区切换与应用程序无缝连接，因为端点URL没有变化，只需要重新建立与数据库实例的任何现有连接</li>
<li>Amazon RDS 会自动处理故障转移，因此，可以尽快恢复数据库操作而无需管理干预。如果出现以下任一情况，主数据库实例会自动切换到备用副本：<ul>
<li>可用区中断</li>
<li>主数据库实例故障</li>
<li>更改数据库实例服务器类型</li>
<li>数据库实例的操作系统在进行软件修补</li>
<li>数据库实例的手动故障转移是使用 Reboot with failover 启动的</li>
</ul>
</li>
<li>可通过多种方法确定多可用区数据库实例是否进行了故障转移：<ul>
<li>数据库事件订阅可设置为在故障转移启动时向发送电子邮件或 SMS 通知。</li>
<li>使用 Amazon RDS 控制台或 API 操作查看数据库事件。</li>
<li>使用 Amazon RDS 控制台 API 操作查看多可用区部署的当前状态</li>
</ul>
</li>
</ul>
<h2 id="Read-Replica"><a href="#Read-Replica" class="headerlink" title="Read Replica"></a>Read Replica</h2><ul>
<li>Amazon RDS 还使用 MariaDB、MySQL、Oracle 和 PostgreSQL 数据库引擎的内置复制功能来从源数据库实例创建一个特殊类型的数据库实例，称为只读副本</li>
<li>对源数据库实例的更新将异步复制到只读副本</li>
<li>将应用程序发出的读取查询路由到只读副本，以减轻源数据库实例上的负载</li>
<li>利用只读副本，可针对进行大量读取操作的数据库负载灵活地进行扩展，突破单个数据库实例的容量限制</li>
<li>只读副本作为允许只读连接的数据库实例运行; 应用程序可以像对任何数据库实例一样连接到只读副本</li>
</ul>
<h3 id="Read-Replica-creation"><a href="#Read-Replica-creation" class="headerlink" title="Read  Replica creation"></a>Read  Replica creation</h3><ul>
<li>一个源数据库实例最多可以创建五个只读副本</li>
<li>创建只读副本过程<ol>
<li>先通过将备份保留期设置为一个非零值来在源数据库实例上启用自动备份</li>
<li>需要将现有数据库实例指定为源</li>
<li>RDS获取源实例的快照，并从快照创建只读实例</li>
<li>然后，RDS使用数据库引擎的异步复制方法更新只读副本以获取对源数据库实例的任何更改</li>
</ol>
</li>
<li>RDS复制源数据库实例中的所有数据实例</li>
<li>如果只读副本位于与数据库实例不同的AWS区域中，则RDS会在源数据库实例与只读副本之间建立安全通信通道</li>
<li>RDS建立启用安全通道所需的任何AWS安全配置，例如添加安全组</li>
<li>在只读副本创建期间，可以在发生数据库快照时体验源数据库实例上的简短I / O挂起</li>
<li>I / O暂停通常持续大约一分钟，如果源数据库实例是多可用区部署，则可以避免（在多可用区部署的情况下，数据库快照是从备用数据库获取的）</li>
<li>长时间运行的活动事务会减慢创建只读副本的过程。建议等待长时间运行的事务完成，然后再创建只读副本。</li>
<li>如果从同一源数据库实例同时创建多个并行只读副本，则 Amazon RDS 仅在开始第一个创建操作时创建一张快照</li>
<li>可以将只读副本提升为新的独立源数据库，在这种情况下，只读副本和源数据库之间的复制链接会断开。 但是，使用原始源DB作为复制源继续复制其他副本</li>
</ul>
<h3 id="Read-Replica-Deletion-amp-DB-Failover"><a href="#Read-Replica-Deletion-amp-DB-Failover" class="headerlink" title="Read Replica Deletion&amp; DB Failover"></a>Read Replica Deletion&amp; DB Failover</h3><ul>
<li>只读副本删除，必须采用与数据库实例一样的显式删除方法</li>
<li>若删除源数据库而不删除副本，则会将每个副本提升为可用区内独立的数据库实例</li>
<li>若multi-az部署的源实例故障转移到备用数据库，则会切换源实例的关联副本到备用数据库上（作为新的源）</li>
</ul>
<h3 id="Read-Replica-Storage-amp-Compute-requirements"><a href="#Read-Replica-Storage-amp-Compute-requirements" class="headerlink" title="Read Replica Storage &amp; Compute requirements"></a>Read Replica Storage &amp; Compute requirements</h3><ul>
<li>默认情况下，使用与源数据库实例相同的存储类型创建只读副本</li>
<li>为使复制有效运行，每个只读副本应具有与源数据库实例相同数量的计算和存储资源</li>
<li>源数据库实例，如果缩放，则应相应地缩放只读副本</li>
</ul>
<h3 id="Read-Replica-Features-amp-Limitations"><a href="#Read-Replica-Features-amp-Limitations" class="headerlink" title="Read Replica Features &amp; Limitations"></a>Read Replica Features &amp; Limitations</h3><ul>
<li>RDS不支持循坏复制</li>
<li>只能从现有数据库实例创建新的只读副本，例如，如果MyDBInstance复制到ReadReplica1，则无法将ReadReplica1配置为复制回MyDBInstance。 从ReadReplica1，只能创建一个新的只读副本，例如ReadRep2</li>
<li>跨区域复制<ul>
<li>只有在使用 MariaDB、PostgreSQL (版本 9.4.7 和 9.5.2 和更高版本) 或 MySQL 5.6 和更高版本的 Amazon RDS 数据库实例时，才能在区域之间进行复制</li>
<li>灾难恢复功能（减少RTO和RPO）</li>
<li>将操作扩展到更接近最终用户的区域，</li>
<li>从一个地区的数据中心迁移到另一个地区</li>
</ul>
</li>
<li>也可以从其他只读副本创建只读副本。 但是，这些实例的副本滞后更高，并且复制链中涉及的实例不能超过四个。</li>
</ul>
<h3 id="RDS-不同引擎的只读副本区别"><a href="#RDS-不同引擎的只读副本区别" class="headerlink" title="RDS 不同引擎的只读副本区别"></a>RDS 不同引擎的只读副本区别</h3><table>
<thead>
<tr>
<th>操作</th>
<th>MySQL 和 MariaDB</th>
<th>Oracle</th>
<th>PostgreSQL</th>
</tr>
</thead>
<tbody><tr>
<td>复制方法是什么？</td>
<td>逻辑复制。</td>
<td>物理复制。</td>
<td>物理复制。</td>
</tr>
<tr>
<td>如何清除事务日志？</td>
<td>Amazon RDS MySQL 和 MariaDB 保留尚未应用的任何二进制日志。</td>
<td>Amazon RDS for Oracle 在源数据库实例中保留至少两个小时的事务日志。两小时之后或在传递 archivelog retention hours 设置之后从源中清除日志，以时间较长者为准。传递 archivelog retention hours 设置之后，仅当它们已成功应用到数据库时，才会从只读副本清除日志。有关设置 archivelog retention hours 的信息，请参阅 保留存档重做日志。</td>
<td>PostgreSQL 具有参数 wal_keep_segments，该参数指示保留多少个提前写入日志 (WAL) 文件以便为只读副本提供数据。该参数值指定要保留的日志的数量。</td>
</tr>
<tr>
<td>是否能将副本设置为可写？</td>
<td>是。 可将 MySQL 或 MariaDB 只读副本设置为可写。</td>
<td>否。Oracle 只读副本是物理副本，Oracle 不允许写入只读副本。可以提升只读副本以将它设置为可写。提升的只读副本拥有提出提升请求时的已复制数据。</td>
<td>否。PostgreSQL 只读副本是一个物理副本，PostgreSQL 不允许将只读副本设置为可写。</td>
</tr>
<tr>
<td>是否能在副本上执行备份？</td>
<td>是。可以对 MySQL 或 MariaDB 只读副本启用自动备份。</td>
<td>否。不能创建 Amazon RDS for Oracle 只读副本的手动快照或为它们启用自动备份。</td>
<td>是，可以创建 PostgreSQL 只读副本的手动快照，但无法启用自动备份。</td>
</tr>
<tr>
<td>是否能使用并行复制？</td>
<td>是。MySQL 5.6 版和更高版本和所有支持的 MariaDB 版本允许并行复制线程。</td>
<td>是。重做日志数据始终会从源数据库并行传输到其所有只读副本。</td>
<td>否。PostgreSQL 是一个处理复制的过程。</td>
</tr>
</tbody></table>
<h3 id="Read-Replica-Use-cases"><a href="#Read-Replica-Use-cases" class="headerlink" title="Read Replica Use cases"></a>Read Replica Use cases</h3><ul>
<li>为读取繁重的数据库工作负载扩展超出单个数据库实例的计算或I / O容量，将过多的读取流量引导到只读副本</li>
<li>在源数据库实例不可用时提供读取流量，例如 如果源数据库实例由于备份I / O挂起或计划维护而无法接收I / O请求，则可以将读取流量定向到只读副本。（此时 数据可能是陈旧的）</li>
<li>业务报告或数据仓库方案，可以对只读副本而不是主要生产数据库实例执行业务报告查询</li>
</ul>
<h1 id="RDS-Storage"><a href="#RDS-Storage" class="headerlink" title="RDS Storage"></a>RDS Storage</h1><ul>
<li>RDS使用EBS存储数据库数据和日志</li>
<li>RDS会自动对多个EBS卷进行条带化，以提高IOPS性能，具体取决于所请求的存储量</li>
</ul>
<h2 id="RDS-Storage-Types"><a href="#RDS-Storage-Types" class="headerlink" title="RDS Storage Types"></a>RDS Storage Types</h2><ul>
<li>RDS 提供三个存储类型：通用型 SSD（也称为 gp2）、预配置 IOPS SSD（也称为 io1）和磁性存储</li>
<li>它们的性能特性和价格不同，这意味着可以根据数据库工作负载需求定制存储性能和成本</li>
<li>以创建最多具有 64 TiB 存储的 MySQL、MariaDB 和 PostgreSQL RDS 数据库实例。最多可以创建具有 64 TiB 存储的 Oracle RDS 数据库实例。可以创建最多具有 16 TiB 存储的 SQL Server RDS 数据库实例。对于此存储量，请使用预配置 IOPS SSD 和通用型 (SSD) 存储类型</li>
</ul>
<h2 id="Magnetic-Standard"><a href="#Magnetic-Standard" class="headerlink" title="Magnetic (Standard)"></a>Magnetic (Standard)</h2><ul>
<li>磁存储，也称为标准存储，提供经济高效的存储，目前AWS建议使用SSD或预配IOPS类型</li>
<li>不允许使用 SQL Server 数据库引擎时扩展存储</li>
<li>不支持弹性卷。</li>
<li>限制为 3 TiB 的最大大小</li>
<li>限制为最大 1,000 IOPS</li>
</ul>
<h2 id="General-Purpose-SSD"><a href="#General-Purpose-SSD" class="headerlink" title="General Purpose (SSD)"></a>General Purpose (SSD)</h2><ul>
<li>通用型 SSD（也称作 gp2）卷提供了适用于各种工作负载的经济高效的存储。这些卷可以提供几毫秒的延迟，能够突增至 3000 IOPS 并维持一段较长的时间</li>
<li>MariaDB、MySQL 和 PostgreSQL 数据库实例：20 GiB–64 TiB</li>
<li>SQL Server for Enterprise、Standard、Web 和 Express 版本：20 GiB–16 TiB</li>
<li>Oracle 实例：20 GiB- 64 TiB</li>
<li>非常适合中小型数据库</li>
</ul>
<h2 id="Provisioned-IOPS"><a href="#Provisioned-IOPS" class="headerlink" title="Provisioned IOPS"></a>Provisioned IOPS</h2><ul>
<li>预配置 IOPS 存储符合 I/O 密集型工作负载（尤其是数据库工作负载）的需求，此类工作负载需要低 I/O 延迟和一致的 I/O 吞吐量</li>
<li>提供了可预测的性能以及一致的低延迟</li>
<li>需要快速且一致的I / O性能的任何生产应用程序，Amazon建议使用预配置IOPS存储类型</li>
<li>预配置的 IOPS 存储针对性能要求一致的联机事务处理 (OLTP) 工作负载进行了优化</li>
<li>下表显示每个数据库引擎的预配置 IOPS 的范围和存储大小范围</li>
</ul>
<table>
<thead>
<tr>
<th>数据库引擎</th>
<th>预配置的 IOPS 的范围</th>
<th>存储的范围</th>
</tr>
</thead>
<tbody><tr>
<td>MariaDB</td>
<td>1000–80000 IOPS</td>
<td>100 GiB–64 TiB</td>
</tr>
<tr>
<td>SQL Server、Enterprise 和 Standard 版本</td>
<td>1000–64000 IOPS*</td>
<td>20 GiB–16 TiB</td>
</tr>
<tr>
<td>SQL Server，Web 和 Express 版本</td>
<td>1000–64000 IOPS*</td>
<td>100 GiB–16 TiB</td>
</tr>
<tr>
<td>MySQL</td>
<td>1000–80000 IOPS</td>
<td>100 GiB–64 TiB</td>
</tr>
<tr>
<td>Oracle</td>
<td>1000–80000 IOPS</td>
<td>100 GiB– 64 TiB</td>
</tr>
<tr>
<td>PostgreSQL</td>
<td>1000–80000 IOPS</td>
<td>100 GiB–64 TiB</td>
</tr>
</tbody></table>
<blockquote>
<p>** 最大 IOPS 64000 仅在基于 Nitro 的实例（m5 实例类型）上是可保证的。其他实例系列可确保最高 32000 IOPS 的性能 ** </p>
<ul>
<li>创建数据库实例时，指定专用IOPS速率和存储空间分配。 RDS规定IOPS速率和存储在数据库实例的生命周期内或直到其更改。</li>
</ul>
</blockquote>
<h2 id="Adding-Storage-and-Changing-Storage-Type"><a href="#Adding-Storage-and-Changing-Storage-Type" class="headerlink" title="Adding Storage and Changing Storage Type"></a>Adding Storage and Changing Storage Type</h2><ul>
<li>可以修改数据库实例以使用其他存储并转换为不同的存储类型。但是，不能减少分配的存储空间（增大可以，缩小不可以）</li>
<li>MySQL，MariaDB，PostgreSQL和Oracle数据库实例可以扩展存储，这有助于提高I / O容量</li>
<li>由于附加到Windows Server环境的条带存储的可扩展性限制，可以更改SQL Server数据库实例的存储容量和存储类型</li>
<li>扩展过程中，数据库实例可用于读取和写入，但可能会出现性能下降</li>
<li>添加存储可能需要几个小时;过程的持续时间取决于几个因素，例如负载，存储大小，存储类型，配置的IOPS数量（如果有）以及先前规模存储操作的数量</li>
<li>在添加存储时，会暂停每夜备份，并且不会执行任何其他RDS操作，包括修改，重新引导，删除，创建只读副本和创建数据库快照</li>
</ul>
<h2 id="Performance-Metrics"><a href="#Performance-Metrics" class="headerlink" title="Performance Metrics"></a>Performance Metrics</h2><p>Amazon RDS提供了多个指标，可用于监控数据库的性能<br><strong>IOPS</strong></p>
<ul>
<li>每秒完成的I / O操作数</li>
<li>它被报告为给定时间间隔的平均IOPS</li>
<li>RDS每隔一分钟报告一次读写IOPS</li>
<li>总IOPS是读写IOPS的总和</li>
<li>IOPS的典型值范围为每秒零到几万<br><strong>Latency</strong></li>
<li>提交I / O请求到完成之间经过的时间</li>
<li>它被报告为给定时间间隔的平均延迟。</li>
<li>RDS以一分钟为单位分别报告读取和写入延迟，单位为秒</li>
<li>延迟的典型值以毫秒（ms）为单位<br><strong>Throughput</strong></li>
<li>传输到磁盘或从磁盘传输的每秒字节数</li>
<li>它被报告为给定时间间隔的平均吞吐量</li>
<li>RDS使用每秒兆字节（MB / s）的单位分别以一分钟的间隔报告读写吞吐量</li>
<li>吞吐量的典型值范围从零到I / O通道的最大带宽<br><strong>Queue Depth</strong></li>
<li>队列中等待服务的I / O请求数。</li>
<li>这些是由应用程序提交但尚未发送到设备的I / O请求，因为设备正在忙于处理其他I / O请求。</li>
<li>它被报告为给定时间间隔的平均队列深度。</li>
<li>RDS以一分钟为间隔报告队列深度。队列深度的典型值范围从零到几百。</li>
<li>在队列中等待的时间是Latency和服务时间（不作为指标）</li>
</ul>
<h2 id="Amazon-RDS-Storage-Facts"><a href="#Amazon-RDS-Storage-Facts" class="headerlink" title="Amazon RDS Storage Facts"></a>Amazon RDS Storage Facts</h2><ul>
<li>第一次启动数据库实例并首次访问磁盘区域时，该进程可能比对同一磁盘区域的所有后续访问花费的时间更长。这被称为“first touch penalty”。一旦磁盘区域产生了“first touch penalty”，即使数据库实例重新启动，重新启动或数据库实例类发生更改，该磁盘区域也不会在实例的生命周期内再次受到惩罚。请注意，从快照，时间点恢复或只读副本创建的数据库实例是新实例，并且会导致此“first touch penalty</li>
<li>RDS管理DB实例，并在实例上保留开销空间。如果预留的存储量随DB实例类和其他因素而变化，那么这个预留空间可能是总存储的1%或2%</li>
<li>预配置IOPS提供了一种通过指定IOPS来保留I / O容量的方法。与任何其他系统容量属性一样，负载下的最大吞吐量将受到首先消耗的资源的约束，这可能是IOPS，通道带宽，CPU，内存或数据库内部资源。</li>
<li>当前可用的最大信道带宽是4000兆比特每秒（Mbps）全双工。就读取和写入吞吐量度量而言，这相当于每个方向上大约210兆字节/秒（MB / s）。 50％读取和50％写入的完美平衡工作负载可以达到420 MB / s的最大组合吞吐量，其中包括协议开销，因此实际数据吞吐量可能更低。</li>
<li>预配置IOPS的I / O请求大小为32 KB。预配置IOPS消耗是I / O请求大小超过32 KB的线性函数。小于32 KB的I / O请求作为一个I / O处理;例如1000 16 KB I / O请求的处理方式与1000 32 KB请求相同。大于32 KB的I / O请求会消耗多个I / O请求;而48 KB I / O请求消耗1.5个I / O存储容量请求; 64 KB I / O请求消耗2个I / O请求</li>
</ul>
<h2 id="Factors-That-Impact-Storage-Performance"><a href="#Factors-That-Impact-Storage-Performance" class="headerlink" title="Factors That Impact Storage Performance"></a>Factors That Impact Storage Performance</h2><ul>
<li>系统活动和数据库工作负载均可能影响存储性能</li>
<li>系统活动，以下系统相关活动圴使用 I/O 容量，并且可能会在执行这些活动时降低数据库实例性能：<ul>
<li>多可用区备用创建</li>
<li>创建只读副本</li>
<li>创建存储类型</li>
</ul>
</li>
<li>数据库工作负载，数据库或应用程序设计导致并发问题、锁定或其他形式的数据库争用。在这类情况下，可能无法直接使用所有预配置的带宽<ul>
<li>已到达基础实例类型的吞吐量限制。</li>
<li>因为应用程序没有驱动足够的 I/O 操作，所以少于队列深度始终小于 1</li>
<li>在数据库中遇到查询争用，即使部分 I/O 容量未使用也是如此</li>
</ul>
</li>
</ul>
<h1 id="RDS-Snapshots-Backup-amp-Restore"><a href="#RDS-Snapshots-Backup-amp-Restore" class="headerlink" title="RDS Snapshots, Backup &amp; Restore"></a>RDS Snapshots, Backup &amp; Restore</h1><ul>
<li>RDS创建数据库实例的存储卷快照，备份整个数据库实例，而不仅仅是单个数据库。</li>
<li>RDS提供了两种不同的自动和手动方法来备份数据库实例：</li>
</ul>
<h2 id="Automated-backups"><a href="#Automated-backups" class="headerlink" title="Automated backups"></a>Automated backups</h2><ul>
<li>将自动创建并保留数据库实例的备份</li>
<li>默认情况下，为新数据库实例启用自动备份</li>
<li>自动备份在每日用户可配置的时间段内发生，称为首选备份窗口<ul>
<li>如果在创建数据库实例时未指定首选备份窗口，则RDS会分配默认的30分钟备份窗口，该窗口是从每个区域的8小时时间块中随机选择的</li>
<li>对备份窗口的更改会立即生效</li>
<li>备份窗口不能与数据库实例的每周维护窗口重叠</li>
</ul>
</li>
<li>创建数据库实例时设置备份保留期。如果未设置备份保留期，则在使用 Amazon RDS API 或 AWS CLI 创建数据库实例时，默认备份保留期为一天。如果使用控制台创建数据库实例，默认备份保留期为七天。创建数据库实例后，可以修改备份保留期。可以将备份保留期设置为在 0 到 35 天之间。要禁用自动备份，请将备份保留期设置为 0</li>
<li>手动快照限制 (每个区域 100 个) 不适用于自动备份</li>
<li>如果更改备份保留期，则会立即发生中断</li>
<li>RDS将周期性数据备份与事务日志结合使用，以便在保留期内将数据库实例恢复到任何秒，直到LatestRestorableTime（通常直到最后几分钟）。</li>
<li>在备份窗口期间，<ul>
<li>对于单个AZ实例，可能会在备份过程初始化（通常在几秒钟内）时暂时暂停存储I / O，并且可能会遇到短暂的高延迟时间。</li>
<li>对于多可用区数据库部署，由于备份是从备用实例获取的，因此没有I / O暂停</li>
</ul>
</li>
<li>自动数据库快照删除<ul>
<li>保留期限到期</li>
<li>数据库实例的自动数据库快照已禁用</li>
<li>数据库实例已删除</li>
</ul>
</li>
<li>删除数据库实例时<ul>
<li>删除后可以创建最终的数据库快照; 可用于在以后恢复已删除的数据库实例</li>
<li>RDS保留最终用户创建的数据库快照以及所有其他手动创建的数据库快照</li>
</ul>
</li>
<li>所有自动备份都将被删除，无法恢复</li>
</ul>
<h2 id="Point-In-Time-Recovery"><a href="#Point-In-Time-Recovery" class="headerlink" title="Point-In-Time Recovery"></a>Point-In-Time Recovery</h2><ul>
<li>除了每日自动备份之外，RDS还存档数据库更改日志。 这样可以将数据库恢复到备份保留期间的任何时间点，直到数据库使用的最后五分钟。</li>
<li>禁用自动备份还会禁用时间点恢复</li>
<li>RDS存储数据的多个副本，但对于单可用区数据库实例，这些副本存储在单个可用区中</li>
<li>如果出于任何原因，单可用区数据库实例变得不可用，则可以使用时间点恢复来启动具有最新可恢复数据的新数据库实例</li>
</ul>
<h2 id="用户自定义数据库快照"><a href="#用户自定义数据库快照" class="headerlink" title="用户自定义数据库快照"></a>用户自定义数据库快照</h2><ul>
<li>手动数据库快照是用户启动的备份，可以将数据库实例备份到已知状态，并可以随时还原到该特定状态。</li>
<li>RDS会保留所有手动数据库快照，直到明确删除</li>
</ul>
<h2 id="创建数据库快照"><a href="#创建数据库快照" class="headerlink" title="创建数据库快照"></a>创建数据库快照</h2><ul>
<li>建数据库实例的存储卷快照，并备份整个数据库实例而不仅仅是单个数据库</li>
<li>数据库快照可以根据需要在已知状态下备份数据库实例，然后可以随时将其还原到该特定状态</li>
<li>保留数据库快照，直到明确删除</li>
<li>在单可用区数据库实例上创建数据库快照会导致短暂的I / O挂起，通常持续时间不会超过几分钟</li>
<li>由于备份是在备用实例上进行的，因此多可用区数据库实例不受此I / O挂起的影响</li>
</ul>
<h2 id="快照还原"><a href="#快照还原" class="headerlink" title="快照还原"></a>快照还原</h2><ul>
<li>数据库实例可以在此保留期内恢复到任何特定时间，从而创建新的数据库实例</li>
<li>从数据库快照还原来创建具有不同endpoint的新数据库实例</li>
<li>RDS将周期性数据备份与事务日志结合使用，以便在保留期内将数据库实例恢复到任何秒，直到LatestRestorableTime（通常直到最后几分钟）</li>
<li>在还原数据库实例时，默认安全组与还原的实例相关联。还原完成之后新数据库实例即变为可用状态，这时必须关联还原的源实例所用的所有自定义安全组</li>
<li>建议保留所创建的数据库快照的参数组，这样还原的数据库实例就可以与正确的参数组关联。可以在还原数据库实例时指定参数组</li>
<li>可以使用与源数据库快照不同的存储类型还原数据库实例。在这种情况下，由于将数据迁移到新存储类型所需的额外工作，恢复过程将变慢。从GP2到预配置IOPS</li>
<li>有当数据库快照具有为新版本分配的所需存储时，才能使用不同版本的数据库引擎还原数据库实例，例如，从SQL Server Web Edition更改为SQL Server标准版，数据库快照必须已经过从具有至少200 GB分配存储的SQL Server数据库实例创建，该实例是SQL Server标准版的最小分配存储</li>
</ul>
<h2 id="DB-Snapshot-Copy"><a href="#DB-Snapshot-Copy" class="headerlink" title="DB Snapshot Copy"></a>DB Snapshot Copy</h2><ul>
<li>可以复制自动或手动数据库快照</li>
<li>复制自动数据库快照以在同一AWS区域中创建手动数据库快照。手动数据库快照不会自动删除，可以无限期保留。</li>
<li>将自动或手动数据库快照从一个区域复制到另一个区域。通过将数据库快照复制到另一个区域，将创建一个保留在该区域中的手动数据库快照</li>
<li>手动数据库快照可以与其他AWS账户共享，并复制其他AWS账户共享数据库快照</li>
<li>快照加密<ul>
<li>可以复制已使用 AWS KMS 加密密钥加密的快照</li>
<li>复制加密的快照，则此快照的副本也必须加密。如果在相同 AWS 区域内复制加密的快照，可使用原始快照的 KMS 加密密钥来加密此副本，也可指定不同的 KMS 加密密钥。如果跨区域复制加密的快照，由于 KMS 密钥是区域特定的，所以不能使用与源快照相同的 KMS 加密密钥</li>
</ul>
</li>
</ul>
<h2 id="快照共享"><a href="#快照共享" class="headerlink" title="快照共享"></a>快照共享</h2><ul>
<li>手动数据库快照或数据库集群快照可与最多20个其他AWS账户共享</li>
<li>与其他AWS账户共享的手动快照可以复制快照，或从该快照还原数据库实例或数据库集群</li>
<li>手动快照也可以作为公共共享，这使快照可供所有AWS账户使用。将快照共享为公共时应小心，以便不包含任何私人信息</li>
<li>共享快照可以复制到另一个区域</li>
<li>与其他 AWS 账户共享手动快照时存在以下限制：<ul>
<li>当使用 AWS Command Line Interface (AWS CLI) 或 Amazon RDS API 从共享的快照还原数据库实例时，必须指定共享快照的 Amazon 资源名称 (ARN) 作为快照标识符</li>
<li>无法共享使用了包含永久或持续性选项的选项组的数据库快照</li>
<li>不能从选项组中移除永久选项。若为数据库实例指定了包含持续性选项的选项组，则不能从数据库实例中删除这些选项组</li>
</ul>
</li>
<li>可共享使用 AES-256 加密算法“静态”加密的数据库快照</li>
<li>用户可以访问用于加密数据库快照的AWS Key Management Service（AWS KMS）加密密钥，则用户只能复制加密的数据库快照</li>
<li>通过将其他帐户添加到KMS密钥策略，可以与其他AWS账户共享AWS KMS加密密钥</li>
<li>但是，在共享加密的数据库快照之前，必须首先通过添加任何帐户来共享KMS密钥策略以共享快照</li>
</ul>
<p>#RDS Security</p>
<ul>
<li>在基于 Amazon VPC 服务的 Virtual Private Cloud (VPC) 中运行数据库实例以获得可能最大的网络访问控制</li>
<li>使用 AWS Identity and Access Management (IAM) 策略分配决定谁可以管理 Amazon RDS 资源的权限</li>
<li>使用安全组可以控制可连接到数据库实例上的数据库的 IP 地址或 Amazon EC2 实例</li>
<li>使用数据库实例的安全套接字层 (SSL) 连接</li>
<li>使用 Amazon RDS 加密保护静态数据库实例和快照</li>
<li>对 Oracle 数据库实例使用网络加密和透明数据加密</li>
<li>使用数据库引擎的安全功能控制可以登录数据库实例上的数据库的人员</li>
</ul>
<h2 id="RDS-Authentication-and-Access-Control"><a href="#RDS-Authentication-and-Access-Control" class="headerlink" title="RDS Authentication and Access Control"></a>RDS Authentication and Access Control</h2><ul>
<li>IAM可用于控制每个用户有权调用的RDS操作</li>
</ul>
<h2 id="Encrypting-RDS-Resources"><a href="#Encrypting-RDS-Resources" class="headerlink" title="Encrypting RDS Resources"></a>Encrypting RDS Resources</h2><ul>
<li>使用行业标准AES-256加密算法来加密承载RDS实例的服务器上的数据</li>
<li>在加密数据后，Amazon RDS 将以透明方式处理访问的身份验证和数据的解密，并且对性能产生的影响最小。无需修改数据库客户端应用程序来使用加密</li>
<li>静态数据加密<ul>
<li>可以在RDS实例上启用以加密底层存储</li>
<li>加密密钥由KMS管理</li>
<li>只能在实例创建期间启用</li>
<li>启用后，无法更改加密密钥</li>
<li>如果密钥丢失，则只能从备份中恢复数据库</li>
</ul>
</li>
<li>为RDS实例启用加密后，<ul>
<li>日志已加密</li>
<li>快照已加密</li>
<li>自动备份已加密</li>
<li>只读副本是加密的</li>
</ul>
</li>
<li>跨区域副本和快照副本不起作用，因为密钥仅在单个区域中可用</li>
<li>快照注意事项<ul>
<li>可以复制使用KMS加密密钥加密的数据库快照</li>
<li>复制加密的数据库快照会生成数据库快照的加密副本</li>
<li>复制时，可以使用与原始数据库快照相同的KMS加密密钥加密数据库快照，也可以使用其他KMS加密密钥加密数据库快照的副本。</li>
<li>可以将未加密的数据库快照复制到加密快照，这是一种向以前未加密的数据库实例添加加密的快速方法。</li>
<li>加密快照只能还原到加密的数据库实例</li>
<li>如果从未加密的数据库集群快照还原时指定了KMS加密密钥，则使用指定的KMS加密密钥对还原的数据库集群进行加密</li>
<li>复制从另一个AWS账户共享的加密快照需要访问用于加密数据库快照的KMS加密密钥。</li>
<li>由于KMS加密密钥特定于创建它们的区域，因此无法将加密快照复制到其他区域</li>
</ul>
</li>
<li>透明数据加密<ul>
<li>在将数据写入底层存储设备之前自动加密数据，并在从存储设备读取数据时进行解密</li>
<li>Oracle和SQL Server支持</li>
<li>Oracle需要KMS外部的密钥存储，并与CloudHSM集成</li>
<li>SQL Server需要密钥，但由RDS管理</li>
</ul>
</li>
</ul>
<h2 id="使用-SSL-加密与数据库实例的连接"><a href="#使用-SSL-加密与数据库实例的连接" class="headerlink" title="使用 SSL 加密与数据库实例的连接"></a>使用 SSL 加密与数据库实例的连接</h2><ul>
<li>使用SSL加密连接，以便在应用程序和数据库实例之间传输数据</li>
<li>当RDS配置实例时，Amazon RDS会创建SSL证书并在数据库实例上安装证书</li>
<li>SSL证书由证书颁发机构签名。 SSL证书包括数据库实例端点作为SSL证书的公用名（CN）以防止欺骗攻击</li>
<li>虽然SSL提供了安全性优势，但请注意，SSL加密是一项计算密集型操作，会增加数据库连接的延迟。</li>
</ul>
<h2 id="RDS-安全组"><a href="#RDS-安全组" class="headerlink" title="RDS 安全组"></a>RDS 安全组</h2><ul>
<li>安全组控制流量进出数据库实例的访问权限</li>
<li>VPC安全组的作用类似于控制对数据库实例的网络访问的防火墙</li>
<li>可以配置VPC安全组并将其与数据库实例关联，以允许从IP地址范围，端口或EC2安全组进行访问</li>
<li>数据库安全组默认为“拒绝所有”访问模式，客户必须专门授权网络入口</li>
</ul>
<h2 id="主账户权限"><a href="#主账户权限" class="headerlink" title="主账户权限"></a>主账户权限</h2><ul>
<li>创建新数据库实例时，使用的默认主用户将获得该数据库实例的特定权限</li>
<li>随后，可以创建具有权限的其他用户</li>
</ul>
<h2 id="事件通知"><a href="#事件通知" class="headerlink" title="事件通知"></a>事件通知</h2><ul>
<li>可以为数据库实例上发生的重要事件配置事件通知</li>
<li>RDS实例上可能发生的各种重要事件的通知，例如实例是否已关闭，备份是否已启动，是否发生故障转移，安全组是否已更改，或者存储空间是否低</li>
</ul>
<h1 id="RDS-Maintenance-amp-Upgrades"><a href="#RDS-Maintenance-amp-Upgrades" class="headerlink" title="RDS Maintenance &amp; Upgrades"></a>RDS Maintenance &amp; Upgrades</h1><p>当手动修改数据库实例时，可能会发生对数据库实例的更改。 数据库引擎版本已升级，或者当Amazon RDS对实例执行维护时</p>
<h2 id="RDS-维护"><a href="#RDS-维护" class="headerlink" title="RDS 维护"></a>RDS 维护</h2><ul>
<li>RDS会定期对Amazon RDS资源（例如数据库实例）执行维护，并且通常涉及对数据库实例的操作系统（OS）的更新</li>
<li>维护项目也可以<ul>
<li>在方便时手动应用于数据库实例</li>
<li>或者等待Amazon RDS在定义的每周维护窗口期间启动的自动维护过程。</li>
</ul>
</li>
<li>维护窗口仅确定挂起操作何时开始，但不限制这些操作的总执行时间。 维护操作无法保证在维护窗口结束之前完成，并且可以继续超过指定的结束时间</li>
<li>可以在RDS控制台上和使用RDS API检查维护更新可用性。 如果有更新，可以<ul>
<li>推迟维护项目</li>
<li>立即应用维护项目</li>
<li>安排它们在下一个定义的维护窗口期间启动</li>
</ul>
</li>
<li>维护项目标记为<ul>
<li>如果延期AWS将在下次执行更新时发送通知，则无法无限期延期</li>
<li>可用且可以无限期延迟，更新不会应用于数据库实例</li>
</ul>
</li>
<li>必需的补丁自动只适用于相关的安全性和可靠性，例如补丁计划。 这种修补很少发生（通常每隔几个月一次），很少需要维护窗口的一小部分。</li>
<li>维护项目要求RDS的数据库实例在短时间内脱机。 需要数据库实例脱机的维护包括扩展计算操作，从开始到结束通常只需几分钟，并且需要操作系统或数据库修补。</li>
<li>数据库实例的多可用区部署通过以下步骤减少了维护事件的影响：<ul>
<li>在备用数据库上执行维护。</li>
<li>将备用数据库提升为主数据库。</li>
<li>对旧主服务器执行维护，这将成为新的主服务器。</li>
</ul>
</li>
<li>在多可用区部署中修改数据库实例的数据库引擎时，RDS会同时升级主数据库实例和辅助数据库实例。 在这种情况下，升级期间将关闭整个多可用区部署的数据库引擎</li>
</ul>
<h2 id="OS-升级"><a href="#OS-升级" class="headerlink" title="OS 升级"></a>OS 升级</h2><ul>
<li>升级到操作系统通常是出于安全问题，应该尽快完成。</li>
<li>数据库实例上的操作系统更新可以方便的时候应用，也可以等待RDS启动的维护过程在定义的维护时段应用更新</li>
<li>应用操作系统更新时，不会自动备份数据库实例，应在应用更新之前进行备份</li>
</ul>
<h2 id="DB-引擎升级"><a href="#DB-引擎升级" class="headerlink" title="DB 引擎升级"></a>DB 引擎升级</h2><ul>
<li>当RDS支持新的数据库引擎版本时，可以升级数据库实例引擎版本</li>
<li>数据库版本升级包括主要版本和次要版本升级</li>
</ul>
<h3 id="主要数据库版本升级"><a href="#主要数据库版本升级" class="headerlink" title="主要数据库版本升级"></a>主要数据库版本升级</h3><ul>
<li>可以包含不向后兼容的更改</li>
<li>RDS不会自动应用主要版本升级</li>
<li>在将数据库实例应用于生产实例之前，应手动修改并彻底测试数据库实例</li>
</ul>
<h3 id="次要版本升级"><a href="#次要版本升级" class="headerlink" title="次要版本升级"></a>次要版本升级</h3><ul>
<li>每个数据库引擎处理次要版本升级略有不同</li>
<li>例如 RDS会自动将次要版本升级应用于运行PostgreSQL的数据库实例，但必须手动应用于运行Oracle的数据库实例</li>
<li>AWS向论坛公告页面发布公告，并在升级数据库实例之前发送客户电子邮件通知</li>
<li>AWS计划在一年中的特定时间进行升级，以帮助计划周围的升级，因为升级数据库引擎版本需要停机时间，即使对于多可用区实例也是如此</li>
<li>RDS在升级过程中需要两个数据库快照。</li>
<li>在进行任何升级更改之前，第一个数据库快照属于数据库实例。 如果升级失败，可以从快照还原以创建运行旧版本的数据库实例。</li>
<li>升级完成后将执行第二个数据库快照。 升级完成后，无法将数据库引擎恢复为以前的版本。 要返回到先前版本，请还原用于创建新数据库实例的第一个数据库快照</li>
<li>如果数据库实例正在使用读取复制，则必须先升级所有只读副本，然后再升级源实例</li>
<li>如果数据库实例处于多可用区部署中，则主要副本和备用副本将同时升级并导致中断。 中断的时间因数据库引擎，版本和数据库实例的大小而异</li>
</ul>
<h2 id="RDS-维护窗口"><a href="#RDS-维护窗口" class="headerlink" title="RDS 维护窗口"></a>RDS 维护窗口</h2><ul>
<li>每个数据库实例都定义了一个每周维护窗口，在此期间应用任何系统更改</li>
<li>在请求或要求的情况下，维护窗口是控制何时发生数据库实例修改和软件修补的机会。</li>
<li>如果为某一周安排了维护事件，则将在定义的30分钟维护时段内启动该事件</li>
<li>维护事件大多在30分钟维护窗口期间完成，但较大的维护事件可能需要更多时间</li>
<li>从每个区域的8小时时间块中随机选择30分钟的维护窗口。如果在创建数据库实例时未指定首选维护时段，则Amazon RDS会在一周中随机选择的某一天分配30分钟的维护时段</li>
<li>在应用维护时，RDS将消耗数据库实例上的一些资源，从而最大限度地降低性能</li>
<li>对于某些维护事件，可能需要多可用区故障转移才能完成维护更新</li>
</ul>
<h1 id="RDS-Monitoring-amp-Notification"><a href="#RDS-Monitoring-amp-Notification" class="headerlink" title="RDS Monitoring &amp; Notification"></a>RDS Monitoring &amp; Notification</h1><ul>
<li>RDS与CloudWatch集成，并提供监控指标</li>
<li>可以在警报更改状态时发送SNS消息的单个度量标准上创建CloudWatch警报</li>
<li>每当发生任何RDS事件时，RDS也会提供SNS通知</li>
</ul>
<h2 id="CloudWatch-RDS-Monitoring"><a href="#CloudWatch-RDS-Monitoring" class="headerlink" title="CloudWatch RDS Monitoring"></a>CloudWatch RDS Monitoring</h2><ul>
<li>可以使用CloudWatch监视RDS数据库实例，CloudWatch可以将RDS中的原始数据收集并处理为可读的近实时指标。</li>
<li>统计信息记录为期两周，以便可以访问历史信息并更好地了解服务的执行情况。</li>
<li>默认情况下，RDS指标数据会在1分钟内自动发送到Amazon CloudWatch</li>
<li>CloudWatch RDS指标</li>
</ul>
<table>
<thead>
<tr>
<th>指标</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>BinLogDiskUsage</td>
<td>主节点上的二进制日志所占的磁盘空间大小。适用于 MySQL 只读副本。单位：字节</td>
</tr>
<tr>
<td>BurstBalance</td>
<td>可用的通用型 SSD (GP2) 突增存储桶 I/O 点数的百分比。单位：百分比</td>
</tr>
<tr>
<td>CPUUtilization</td>
<td>CPU 使用百分率。单位：百分比</td>
</tr>
<tr>
<td>CPUCreditUsage</td>
<td>[T2 实例] 实例为保持 CPU 使用率而花费的 CPU 积分数。单位：积分 (vCPU 分钟)</td>
</tr>
<tr>
<td>CPUCreditBalance</td>
<td>[T2 实例] 实例自启动后已累积获得的 CPU 积分数。单位：积分 (vCPU 分钟)</td>
</tr>
<tr>
<td>DatabaseConnections</td>
<td>使用中的数据库连接数。单位：计数</td>
</tr>
<tr>
<td>DiskQueueDepth</td>
<td>等待访问磁盘的未完成 IO（读取/写入请求）的数量。单位：计数</td>
</tr>
<tr>
<td>FailedSQLServerAgentJobsCount</td>
<td>过去 1 分钟内失败的 SQL Server 代理作业的数量。单位：计数/分钟</td>
</tr>
<tr>
<td>FreeableMemory</td>
<td>随机存取内存的可用大小。单位：字节</td>
</tr>
<tr>
<td>FreeStorageSpace</td>
<td>可用存储空间的大小。单位：字节</td>
</tr>
<tr>
<td>MaximumUsedTransactionIDs</td>
<td>已使用的最大事务 ID。适用于 PostgreSQL。单位：计数</td>
</tr>
<tr>
<td>NetworkReceiveThroughput</td>
<td>数据库实例的传入（接收）网络流量，包括用于监控和复制的客户数据库流量和 Amazon RDS 流量。单位：字节/秒</td>
</tr>
<tr>
<td>NetworkTransmitThroughput</td>
<td>数据库实例的传出（传输）网络流量，包括用于监控和复制的客户数据库流量和 Amazon RDS 流量。单位：字节/秒</td>
</tr>
<tr>
<td>OldestReplicationSlotLag</td>
<td>在接收 WAL 数据方面最滞后的副本的滞后大小。适用于 PostgreSQL。单位：MB</td>
</tr>
<tr>
<td>ReadIOPS</td>
<td>每秒平均磁盘读取 I/O 操作数。单位：计数/秒</td>
</tr>
<tr>
<td>ReadLatency</td>
<td>每个磁盘 I/O 操作所需的平均时间。单位：秒</td>
</tr>
<tr>
<td>ReadThroughput</td>
<td>每秒从磁盘读取的平均字节数。单位：字节/秒</td>
</tr>
<tr>
<td>ReplicaLag</td>
<td>只读副本数据库实例滞后于源数据库实例的时间量。适用于 MySQL、MariaDB 和 PostgreSQL 只读副本。单位：秒</td>
</tr>
<tr>
<td>ReplicationSlotDiskUsage</td>
<td>复制插槽文件使用的磁盘空间。适用于 PostgreSQL。单位：MB</td>
</tr>
<tr>
<td>SwapUsage</td>
<td>数据库实例上使用的交换空间的大小。此指标对于 SQL Server 不可用。单位：字节</td>
</tr>
<tr>
<td>TransactionLogsDiskUsage</td>
<td>事务日志使用的磁盘空间。适用于 PostgreSQL。单位：MB</td>
</tr>
<tr>
<td>TransactionLogsGeneration</td>
<td>每秒生成的事务日志的大小。适用于 PostgreSQL。单位：字节/秒</td>
</tr>
<tr>
<td>WriteIOPS</td>
<td>每秒平均磁盘写入 I/O 操作数。单位：计数/秒</td>
</tr>
<tr>
<td>WriteLatency</td>
<td>每个磁盘 I/O 操作所需的平均时间。单位：秒</td>
</tr>
<tr>
<td>WriteThroughput</td>
<td>每秒写入磁盘的平均字节数。单位：字节/秒</td>
</tr>
</tbody></table>
<h2 id="RDS-Event-Notification"><a href="#RDS-Event-Notification" class="headerlink" title="RDS Event Notification"></a>RDS Event Notification</h2><ul>
<li>RDS使用SNS在发生RDS事件时提供通知</li>
<li>RDS将事件分组，可以订阅这些类别，以便在发生该类别中的事件时发送通知。</li>
<li>可以订阅数据库实例，数据库集群，数据库快照，数据库集群快照，数据库安全组或数据库参数组的事件类别</li>
<li>事件通知将发送到订阅创建期间提供的电子邮件地址</li>
<li>通过在RDS控制台中将Enabled单选按钮设置为No或使用CLI或RDS API将Enabled参数设置为false，可以轻松关闭订阅而不删除订阅</li>
</ul>
<h1 id="RDS-最佳实践"><a href="#RDS-最佳实践" class="headerlink" title="RDS 最佳实践"></a>RDS 最佳实践</h1><h2 id="Amazon-RDS-基本操作指导"><a href="#Amazon-RDS-基本操作指导" class="headerlink" title="Amazon RDS 基本操作指导"></a>Amazon RDS 基本操作指导</h2><ul>
<li>Monitoring<ul>
<li>监控内存、CPU 和存储空间使用情况。可以将 Amazon CloudWatch 设置为在使用模式发生变化或接近部署容量时向发送通知，以保持系统性能和可用性</li>
</ul>
</li>
<li>Scaling <ul>
<li>当接近存储容量限制时，可以向上扩展数据库实例</li>
<li>存储和内存中应含有一些缓冲区，以适应应用程序的意外增大需求</li>
</ul>
</li>
<li>Backup<ul>
<li>启用自动备份并设置备份时段，以在每天写入 IOPS 较低的时段进行</li>
</ul>
</li>
<li>在MySQL数据库实例上，<ul>
<li>不要创建使用自动配置的IOPS或1000个表使用标准存储超过10000个表。故障转移或数据库崩溃后，大量表将显着增加数据库恢复时间。 如果需要创建多于建议的表，请将innodb_file_per_table参数设置为0。</li>
<li>避免数据库中的表变得过大。 预配置存储限制将MySQL表文件的最大大小限制为6 TB。 而是对大表进行分区，以使文件大小远低于6 TB的限制。 这还可以提高性能和恢复时间。</li>
</ul>
</li>
<li>Performance</li>
<li>数据库工作负载需要的 I/O 超过配置，那么出现故障转移或数据库故障后，恢复的速度将会变缓<ul>
<li>迁移到具有高 I/O 容量的数据库实例类</li>
<li>从标准存储转换为通用存储或配置的 IOPS 存储，具体取决于需要增加的量</li>
<li>已在使用配置的 IOPS 存储，请额外配置吞吐量容量</li>
</ul>
</li>
<li>多可用区和故障转移<ul>
<li>在所有可用区中部署应用程序，如果AZ发生故障，其他AZ中的应用程序仍可用</li>
<li>使用Amazon RDS数据库事件来监控故障转移</li>
<li>如果客户端应用程序正在缓存数据库实例的DNS数据，则设置小于30秒的TTL。 由于数据库实例的基础IP地址可能在故障转移后发生更改，因此如果应用程序尝试连接到不再使用的IP地址，则将DNS数据缓存较长时间可能会导致连接失败</li>
<li>多可用区要求启用事务日志记录功能。 不要使用简单恢复模式，脱机模式或只读模式等功能来转换事务日志记录</li>
<li>缩短故障转移时间<ol>
<li>确保工作负载分配了足够的预配置IOPS。 I / O不足可能会延长故障转移时间。 数据库恢复需要I / O</li>
<li>使用较小的交易。 数据库恢复依赖于事务，因此将大型事务分解为多个较小的事务以缩短故障转移时间</li>
</ol>
</li>
<li>测试数据库实例的故障转移，以了解进程对用例的持续时间，并确保访问数据库实例的应用程序可以在故障转移后自动连接到新的数据库实例</li>
</ul>
</li>
</ul>
<h2 id="数据库实例-RAM-建议"><a href="#数据库实例-RAM-建议" class="headerlink" title="数据库实例 RAM 建议"></a>数据库实例 RAM 建议</h2><ul>
<li>RDS 性能最佳实践是分配足够的 RAM，以便工作集几乎完全驻留在内存中</li>
<li>ReadIOPS 的值应是一个较小且稳定的值</li>
<li>要确定工作集是否几乎完全位于内存中，请在数据库实例加载期间检查 ReadIOPS 指标 (使用 Amazon CloudWatch)</li>
<li>如果将数据库实例类向上扩展—到带更多 RAM 的类—则会导致 ReadIOPS 大幅降低，从而使工作集不能几乎完全位于内存中。继续向上扩展直至 ReadIOPS 不再在扩展操作后大幅降低，否则 ReadIOPS 将降低至非常小的数量</li>
</ul>
<h2 id="RDS安全实践"><a href="#RDS安全实践" class="headerlink" title="RDS安全实践"></a>RDS安全实践</h2><ul>
<li>不要使用AWS根凭据来管理Amazon RDS资源; 应该为每个人创建IAM用户</li>
<li>为每个用户授予执行其职责所需的最小权限集</li>
<li>使用IAM组有效管理多个用户的权限</li>
<li>定期轮换IAM凭据</li>
</ul>
<h2 id="使用增强监控操作系统"><a href="#使用增强监控操作系统" class="headerlink" title="使用增强监控操作系统"></a>使用增强监控操作系统</h2><ul>
<li>Amazon RDS为数据库实例运行的操作系统（OS）提供实时指标</li>
</ul>
<h2 id="使用指标确定性能问题"><a href="#使用指标确定性能问题" class="headerlink" title="使用指标确定性能问题"></a>使用指标确定性能问题</h2><ul>
<li>要确定资源不足和其他常见瓶颈导致的性能问题，可以监控可用于 Amazon RDS 数据库实例的指标</li>
<li>应定期监控性能指标以查看各种时间范围内的平均值、最大值和最小值</li>
<li>可以针对特定指标阈值设置 Amazon CloudWatch 警报，以便在达到这些阈值时发出警报</li>
<li>数据库实例具有许多不同类别的度量标准，包括CPU，内存，磁盘空间，IOPS，数据库连接和网络流量，以及如何确定可接受的值取决于度量标准。</li>
<li>提高数据库实例性能的最佳方法之一是调整最常用和最耗费资源的查询，以降低运行成本</li>
</ul>
<h2 id="Recovery"><a href="#Recovery" class="headerlink" title="Recovery"></a>Recovery</h2><h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><ul>
<li>InnoDB是Amazon RDS上MySQL数据库实例的推荐和支持的存储引擎。</li>
<li>但是，如果需要强大的全文搜索功能，MyISAM的性能优于InnoDB。</li>
<li>Amazon RDS for MySQL的时间点恢复和快照恢复功能需要可崩溃恢复的存储引擎，并且仅支持InnoDB存储引擎。</li>
<li>尽管MySQL支持具有不同功能的多个存储引擎，但并非所有存储引擎都针对崩溃恢复和数据持久性进行了优化</li>
<li>MyISAM存储引擎不支持可靠的崩溃恢复，并且可能会阻止时间点还原或快照还原按预期工作，这可能会导致在崩溃后重新启动MySQL时丢失或损坏数据</li>
</ul>
<h3 id="MariaDB"><a href="#MariaDB" class="headerlink" title="MariaDB"></a>MariaDB</h3><ul>
<li>XtraDB是Amazon RDS上MariaDB数据库实例的推荐和支持的存储引擎</li>
<li>Amazon RDS for MariaDB的时间点恢复和快照恢复功能需要可崩溃恢复的存储引擎，并且仅支持XtraDB存储引擎</li>
<li>尽管 Aria 是 MyISAM 的崩溃安全替代，但它仍可能使时间点还原或快照还原无法按预期工作。这可能导致在崩溃后重新启动 MariaDB 时丢失或损坏数据</li>
</ul>
<h1 id="Refer"><a href="#Refer" class="headerlink" title="Refer"></a>Refer</h1><ul>
<li>Amazon Relational Database Service user guide</li>
<li><a href="http://jayendrapatil.com/aws-relational-database-service-rds/" target="_blank" rel="noopener">http://jayendrapatil.com/aws-relational-database-service-rds/</a></li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/RDS，AWS/" rel="tag"># RDS，AWS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/08/17/CDN技术详解/" rel="next" title="CDN技术详解">
                <i class="fa fa-chevron-left"></i> CDN技术详解
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/08/18/思考心得/" rel="prev" title="思考心得">
                思考心得 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">seven</p>
              <p class="site-description motion-element" itemprop="description">seven 的精神家园，学习笔记</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="1988xuegang@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#AWS-Relation-Database-Service"><span class="nav-number">1.</span> <span class="nav-text">AWS Relation Database Service</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RDS-Components"><span class="nav-number">1.1.</span> <span class="nav-text">RDS Components</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DB-Instance"><span class="nav-number">1.1.1.</span> <span class="nav-text">DB Instance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#区域和可用区"><span class="nav-number">1.1.2.</span> <span class="nav-text">区域和可用区</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RDS-Replication-–-Multi-AZ-amp-Read-Replica"><span class="nav-number">2.</span> <span class="nav-text">RDS Replication – Multi-AZ &amp; Read Replica</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Multi-AZ-deployment"><span class="nav-number">2.1.</span> <span class="nav-text">Multi-AZ deployment</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RDS-Multi-AZ-Failover-Process"><span class="nav-number">2.2.</span> <span class="nav-text">RDS Multi-AZ Failover Process</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Read-Replica"><span class="nav-number">2.3.</span> <span class="nav-text">Read Replica</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Read-Replica-creation"><span class="nav-number">2.3.1.</span> <span class="nav-text">Read  Replica creation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Read-Replica-Deletion-amp-DB-Failover"><span class="nav-number">2.3.2.</span> <span class="nav-text">Read Replica Deletion&amp; DB Failover</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Read-Replica-Storage-amp-Compute-requirements"><span class="nav-number">2.3.3.</span> <span class="nav-text">Read Replica Storage &amp; Compute requirements</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Read-Replica-Features-amp-Limitations"><span class="nav-number">2.3.4.</span> <span class="nav-text">Read Replica Features &amp; Limitations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RDS-不同引擎的只读副本区别"><span class="nav-number">2.3.5.</span> <span class="nav-text">RDS 不同引擎的只读副本区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Read-Replica-Use-cases"><span class="nav-number">2.3.6.</span> <span class="nav-text">Read Replica Use cases</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RDS-Storage"><span class="nav-number">3.</span> <span class="nav-text">RDS Storage</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RDS-Storage-Types"><span class="nav-number">3.1.</span> <span class="nav-text">RDS Storage Types</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Magnetic-Standard"><span class="nav-number">3.2.</span> <span class="nav-text">Magnetic (Standard)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#General-Purpose-SSD"><span class="nav-number">3.3.</span> <span class="nav-text">General Purpose (SSD)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Provisioned-IOPS"><span class="nav-number">3.4.</span> <span class="nav-text">Provisioned IOPS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Adding-Storage-and-Changing-Storage-Type"><span class="nav-number">3.5.</span> <span class="nav-text">Adding Storage and Changing Storage Type</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Performance-Metrics"><span class="nav-number">3.6.</span> <span class="nav-text">Performance Metrics</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Amazon-RDS-Storage-Facts"><span class="nav-number">3.7.</span> <span class="nav-text">Amazon RDS Storage Facts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Factors-That-Impact-Storage-Performance"><span class="nav-number">3.8.</span> <span class="nav-text">Factors That Impact Storage Performance</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RDS-Snapshots-Backup-amp-Restore"><span class="nav-number">4.</span> <span class="nav-text">RDS Snapshots, Backup &amp; Restore</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Automated-backups"><span class="nav-number">4.1.</span> <span class="nav-text">Automated backups</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Point-In-Time-Recovery"><span class="nav-number">4.2.</span> <span class="nav-text">Point-In-Time Recovery</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户自定义数据库快照"><span class="nav-number">4.3.</span> <span class="nav-text">用户自定义数据库快照</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建数据库快照"><span class="nav-number">4.4.</span> <span class="nav-text">创建数据库快照</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#快照还原"><span class="nav-number">4.5.</span> <span class="nav-text">快照还原</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DB-Snapshot-Copy"><span class="nav-number">4.6.</span> <span class="nav-text">DB Snapshot Copy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#快照共享"><span class="nav-number">4.7.</span> <span class="nav-text">快照共享</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RDS-Authentication-and-Access-Control"><span class="nav-number">4.8.</span> <span class="nav-text">RDS Authentication and Access Control</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Encrypting-RDS-Resources"><span class="nav-number">4.9.</span> <span class="nav-text">Encrypting RDS Resources</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用-SSL-加密与数据库实例的连接"><span class="nav-number">4.10.</span> <span class="nav-text">使用 SSL 加密与数据库实例的连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RDS-安全组"><span class="nav-number">4.11.</span> <span class="nav-text">RDS 安全组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主账户权限"><span class="nav-number">4.12.</span> <span class="nav-text">主账户权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事件通知"><span class="nav-number">4.13.</span> <span class="nav-text">事件通知</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RDS-Maintenance-amp-Upgrades"><span class="nav-number">5.</span> <span class="nav-text">RDS Maintenance &amp; Upgrades</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RDS-维护"><span class="nav-number">5.1.</span> <span class="nav-text">RDS 维护</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OS-升级"><span class="nav-number">5.2.</span> <span class="nav-text">OS 升级</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DB-引擎升级"><span class="nav-number">5.3.</span> <span class="nav-text">DB 引擎升级</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#主要数据库版本升级"><span class="nav-number">5.3.1.</span> <span class="nav-text">主要数据库版本升级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#次要版本升级"><span class="nav-number">5.3.2.</span> <span class="nav-text">次要版本升级</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RDS-维护窗口"><span class="nav-number">5.4.</span> <span class="nav-text">RDS 维护窗口</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RDS-Monitoring-amp-Notification"><span class="nav-number">6.</span> <span class="nav-text">RDS Monitoring &amp; Notification</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CloudWatch-RDS-Monitoring"><span class="nav-number">6.1.</span> <span class="nav-text">CloudWatch RDS Monitoring</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RDS-Event-Notification"><span class="nav-number">6.2.</span> <span class="nav-text">RDS Event Notification</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RDS-最佳实践"><span class="nav-number">7.</span> <span class="nav-text">RDS 最佳实践</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Amazon-RDS-基本操作指导"><span class="nav-number">7.1.</span> <span class="nav-text">Amazon RDS 基本操作指导</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库实例-RAM-建议"><span class="nav-number">7.2.</span> <span class="nav-text">数据库实例 RAM 建议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RDS安全实践"><span class="nav-number">7.3.</span> <span class="nav-text">RDS安全实践</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用增强监控操作系统"><span class="nav-number">7.4.</span> <span class="nav-text">使用增强监控操作系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用指标确定性能问题"><span class="nav-number">7.5.</span> <span class="nav-text">使用指标确定性能问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Recovery"><span class="nav-number">7.6.</span> <span class="nav-text">Recovery</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL"><span class="nav-number">7.6.1.</span> <span class="nav-text">MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MariaDB"><span class="nav-number">7.6.2.</span> <span class="nav-text">MariaDB</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Refer"><span class="nav-number">8.</span> <span class="nav-text">Refer</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">seven</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




<!-- 新增访客统计代码 -->

<div class="busuanzi-count">
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="site-uv">
      <i class="fa fa-user"></i>
      访问用户： <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人
    </span>
    <div class="powered-by"></div>
    <span class="site-uv">
      <i class="fa fa-eye"></i>
      访问次数： <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次
    </span>
    <!-- 博客字数统计 -->
    <span class="site-pv">
      <i class="fa fa-pencil"></i>
      博客全站共： <span class="post-count"></span> 字
    </span>
</div>
<!-- 新增访客统计代码 END-->


<!-- 在网页底部添加网站运行时间 -->
<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("07/21/2018 00:00:00");//此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "Run for "+dnum+" Days ";
        document.getElementById("times").innerHTML = hnum + " Hours " + mnum + " m " + snum + " s";
    }
setInterval("createtime()",250);
</script>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  







  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_lines.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
